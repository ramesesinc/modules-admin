import com.rameses.annotations.*;

class AdminRolePluginService {
	
	@DataContext("sys_user_role")
	def userRoleEm;

	@Env
	def env;

	@ProxyMethod
	public def getUserRoles( def o  ) {
		def userid = o.userid;
		def orgid = o.orgid;
		
		def v = [:];
		v.userid = userid;
		if(orgid) {
			v.put("org.objid", orgid );
		}

		def roles = [:];

		def userRoles =  userRoleEm.find( v ).list();
		userRoles.each {
			roles.put( it.role, null );
		}
		return roles;
	}


}